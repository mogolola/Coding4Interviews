import {isEqual} from "underscore"


export class Tester {
    testList:Array<any>
    _func: (...args:any)=>any

    constructor(func:(...args:any)=>any){
        this.testList = [];
        this._func = func;
    }

    get func(){
        return this._func;
    }


    addTest(...args:any){
        let expected = args.pop();
        this.testList.push([args, expected])
    }


    doTest(){
        let {testList, func} = this;
        console.log(`start tests`);
        try{
            testList.forEach(([args,expectedAns],idx)=>{
            let result = func(...args);
            if(isEqual(result, expectedAns)){
                console.log(`Test ${idx+1} is succeed`)
            }else{
                console.log(`Test ${idx+1} is failed, result expected to be ${expectedAns}, result actully is ${result}`)
            }
        })
        console.log(`Tests done`);
        }catch(e){
            console.log(`Tests are interrepted due to exception`);
            console.error(e);
        }
    }
} 